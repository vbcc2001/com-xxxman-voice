<!doctype html>
<head>
  <meta charset="utf-8">
  <title>voice</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.0.14.min.js"></script>
</head>

<body>
  <div id="signUp" >
  	<table border="1">
	  <tr>
		<th>用户名</th>
		<td><input type="text" id="username" /></td>
	  </tr>
	  <tr>
		<th>密码</th>
		<td><input type="password" id="password" /></td>
	  </tr>
	  <tr>
		<th>邮箱</th>
		<td><input type="text" id="email" /></td>
	  </tr>	  
	  <tr>
		<td  colspan="2" >
			<input type="button" onclick="signUp()" value = "注册"/>
			<input type="button" onclick="login()" value = "登录"/>
		</td>
	  </tr>	  
	</table>
  </div>
  <div id="login">
  </div>
  <div id="main">
	<table border="1" id="table_voiceObject">
	</table>
  </div>

  <script type="text/javascript">
    Parse.initialize("7Pl8cPh7yQQQjhblyAyf9Bg7tt4H0Sm5OvDAAW14", "06y5lCIkE4DkLJn7wssROZda5fw6erdTxiixKnM2");
	
	var voiceObject = Parse.Object.extend("VoiceObject");
	var query = new Parse.Query(voiceObject);
	query.find({
	  success: function(results) {
		alert("查询成功,共 " + results.length + " 条.");
		createTable(results);
	  },
	  error: function(error) {
		alert("Error: " + error.code + " " + error.message);
	  }
	});
	
	function createTable(results)
	{ 
		var table=$("<table border=\"1\">");
		table.appendTo($("#main"));
		var tr=$("<tr></tr>");
		tr.appendTo(table);

		var th=$("<th>编号</th>");
		th.appendTo(tr);	
		var th=$("<th>标题</th>");
		th.appendTo(tr);
		var th=$("<th>类型</th>");
		th.appendTo(tr);
		var th=$("<th>uri</th>");
		th.appendTo(tr);
		var th=$("<th>点击数</th>");
		th.appendTo(tr);		
		for(var i=0;i<results.length;i++)
		{
			var tr=$("<tr></tr>");
			tr.appendTo(table);

			var td=$("<td>"+i+"</td>");
			td.appendTo(tr);	

			var td=$("<td></td>");
			var input = $("<input size='30' type='text' value='"+results[i].get("title")+"'/>")
			input.appendTo(td);
			td.appendTo(tr);

			var td=$("<td></td>");
			var input = $("<input size='10' type='text' value='"+results[i].get("type")+"'/>")
			input.appendTo(td);
			td.appendTo(tr);

			var td=$("<td></td>");
			var input = $("<input size='100' type='text' value='"+results[i].get("uri")+"'/>")
			input.appendTo(td);
			td.appendTo(tr);

			var td=$("<td></td>");
			var input = $("<input size='6' type='text' value='"+results[i].get("checkedCount")+"'/>")
			input.appendTo(td);
			td.appendTo(tr);
		}
		trend.appendTo(table);
		$("#main").append("</table>");
	}
	
	/**
    var TestObject = Parse.Object.extend("TestObject");
    var testObject = new TestObject();
      testObject.save({foo: "bar"}, {
      success: function(object) {
        $(".success").show();
      },
      error: function(model, error) {
        $(".error").show();
      }
    });
	**/
	

	function signUp(){
		var user = new Parse.User();
		user.set("username", $("#username").val());
		user.set("password", $("#password").val());
		user.set("email", $("#email").val());

		user.signUp(null, {
		  success: function(user) {
			alert("注册成功");
		  },
		  error: function(user, error) {
			alert("Error: " + error.code + " " + error.message);
		  }
		});
	}
	function login(){
		Parse.User.logIn($("#username").val(), $("#password").val(), {
		  success: function(user) {
			alert("登录成功");
		  },
		  error: function(user, error) {
			alert("Error: " + error.code + " " + error.message);
		  }
		});	
	}	
  </script>
</body>

</html>
